# - alias: "Notify iOS"
#   trigger:
#     - platform: state
#       entity_id: light.bedroom_4
#       to: 'on'
#       from: 'off'
#   action:
#     - service: notify.ios_pesiphone6
#       data:
#         message: "Something happened at home!"
#         data:
#           push:
#             badge: 5
#             sound: <SOUND FILE HERE>
#             category: "ALARM" # Needs to match the top level identifier you used in the ios configuration
#           action_data: # Anything passed in action_data will get echoed back to Home Assistant.
#             entity_id: light.bedroom_lw
#             my_custom_data: foo_bar
#
# - alias: Sound the alarm
#   trigger:
#     - platform: event
#       event_type: ios.notification_action_fired
#       event_data:
#         actionName: SOUND_ALARM
#   action:
#     - service: notify.email
#       data:
#         title: "Sound the alarm"
#         message: "Sound the alarm message"

- alias: Notify iOS app
  initial_state: true
  hide_entity: false
  trigger:
    - platform: state
      entity_id: light.bedroom_4
      to: 'on'
      from: 'off'
  action:
    - service: notify.ios_pesiphone6
      data:
        message: “Bedroom 4 Light is on”
        data:
          push:
            badge: 1
            # sound: <SOUND FILE HERE>
            category: "ALARM" # Needs to match the top level identifier you used in the ios configuration
          action_data: # Anything passed in action_data will get echoed back to Home Assistant.
            entity_id: light.bedroom_4
            my_custom_data: foo_bar
    # - service: notify.ios_pesipadmini2
    #   data:
    #     message: “Bedroom 4 Light is on”
    #     data:
    #       push:
    #         badge: 1
    #         sound: <SOUND FILE HERE>
    #         category: "ALARM" # Needs to match the top level identifier you used in the ios configuration
    #       action_data: # Anything passed in action_data will get echoed back to Home Assistant.
    #         entity_id: light.bedroom_4
    #         my_custom_data: foo_bar

- alias: iOS app notification action pressed
  initial_state: true
  hide_entity: false
  trigger:
    - platform: event
      event_type: ios.notification_action_fired
      event_data:
        actionName: SOUND_ALARM
  action:
    - service: light.turn_on
      entity_id: light.bedroom_3
      data:
        effect: random
        transition: 1
        brightness: 100
    - service: light.turn_on
      entity_id: light.bedroom_4
      data:
        effect: random
        transition: 1
        brightness: 100
    - service: notify.tv
      data:
        title: "Loop Bedroom Lights"
        message: 'Two lights in Bedroom are set to colour looping [{{now().strftime("%d.%m.%y")}} {{now().strftime("%H:%M")}}]'
